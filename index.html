<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Simulation de gains en bourse</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            margin-bottom: 20px;
        }
        .tables-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 2px 10px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        h2 {
            text-align: center;
        }
    </style>
</head>
<body>

<!-- Champ pour saisir le capital engagé -->
<div class="container">
    <label for="capitalInput">Capital engagé (€) :</label>
    <input type="number" id="capitalInput" value="1000" min="0" step="any">
</div>

<div class="tables-container">
    <!-- Tableau de gauche : variations de 0 à 0,5 % -->
    <div>
        <table>
            <thead>
            <tr>
                <th>Variation (%)</th>
                <th>x1</th>
                <th>x2</th>
                <th>x5</th>
                <th>x10</th>
                <th>x20</th>
            </tr>
            </thead>
            <tbody id="leftTableBody">
            <!-- Les lignes seront générées par JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Tableau de droite : variations de 0,5 à 1 % -->
    <div>
        <table>
            <thead>
            <tr>
                <th>Variation (%)</th>
                <th>x1</th>
                <th>x2</th>
                <th>x5</th>
                <th>x10</th>
                <th>x20</th>
            </tr>
            </thead>
            <tbody id="rightTableBody">
            <!-- Les lignes seront générées par JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<script>
    // Définition des multiplicateurs d'effet de levier et du pas de variation
    const leverageMultipliers = [1, 2, 5, 10, 20];
    const step = 0.01;
    const epsilon = 1e-10; // Pour pallier les imprécisions du float

    // Fonction factorisée pour générer les lignes d'un tableau
    function generateTable(tbody, startVariation, endVariation, capital) {
        tbody.innerHTML = "";
        for (let variation = startVariation; variation <= endVariation + epsilon; variation += step) {
            const row = document.createElement("tr");

            // Colonne Variation
            const variationCell = document.createElement("td");
            variationCell.textContent = variation.toFixed(2);
            row.appendChild(variationCell);

            // Colonnes pour chaque effet de levier
            leverageMultipliers.forEach(multiplier => {
                const gain = capital * (variation / 100) * multiplier;
                const cell = document.createElement("td");
                cell.textContent = gain.toFixed(2);
                row.appendChild(cell);
            });

            tbody.appendChild(row);
        }
    }

    // Fonction de mise à jour des deux tableaux
    function updateTables() {
        const capital = parseFloat(document.getElementById("capitalInput").value);
        const leftTableBody = document.getElementById("leftTableBody");
        const rightTableBody = document.getElementById("rightTableBody");

        generateTable(leftTableBody, 0, 0.5, capital);
        generateTable(rightTableBody, 0.5, 1, capital);
    }

    // Actualisation lors du changement de capital engagé
    document.getElementById("capitalInput").addEventListener("input", updateTables);

    // Affichage initial
    updateTables();
</script>
</body>
</html>
